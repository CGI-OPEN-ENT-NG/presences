<table class="absences-table table table-hover"
       data-ng-show="vm.events.all && vm.events.all.length > 0">
    <thead>
    <tr>
        <th width="15%">
            <i18n>presences.exemptions.student</i18n>
        </th>
        <th width="6%">
            <i18n>presences.exemptions.dates</i18n>
        </th>
        <th width="1%">
            <i18n>presences.absence.period</i18n>
        </th>
        <th width="2%">
            <i18n>presences.absence.reason</i18n>
        </th>
        <th width="1%">
            <i18n>presences.absence.file</i18n>
        </th>
        <th width="1%">
            <i18n>presences.absence.action</i18n>
        </th>
        <th width="1%">
            <i18n>presences.absence.regularise</i18n>
        </th>
    </tr>
    </thead>
    <tbody class="absences-table-body" data-ng-repeat="event in vm.events.all">
    <tr data-id="[[event.id]]" data-ng-click="vm.toggleCollapse($event)">

        <!-- Profile -->
        <th class="absences-table-body-student">
            <img src="https://cdn1.iconfinder.com/data/icons/user-pictures/100/unknown-512.png" height="43"
                 width="43">
            <div class="absences-table-body-student-content">
                <span>[[event.student.displayName]]</span>
                <span>[[event.student.classeName]]</span>
            </div>
        </th>

        <!-- Date -->
        <th class="absences-table-body-date uppercase text-center">[[event.start_date | date:'dd/MM/yyyy']]</th>

        <!-- Period -->
        <th class="absences-table-body-period text-center">
            <ul class="period">
                <li ng-repeat="periods in event.student.day_history track by $index"
                    data-ng-click="vm.setAbsent(periods, event, $event)"
                    class="[[vm.eventTypeState(periods, event, $index)]]"
                    tooltip="[[periods.name]]">
                </li>
                <li><i class="tableEdit" data-ng-click="vm.editPeriod($event)"></i></li>
            </ul>
        </th>

        <!-- Select reason-->
        <th class="table-reason text-center">
            <label>
                <select data-ng-model="event.reason_id"
                        ng-init="vm.getSelectValue(event)"
                        data-ng-click="vm.reasonSelect($event)"
                        data-ng-change="vm.changeReason(event)"
                        ng-options="reason.id as reason.label for reason in vm.eventReasonsType">
                    <option value="">[[lang.translate('presences.absence.select.empty')]]</option>
                </select>
            </label>
        </th>

        <!-- Download file-->
        <th class="absences-table-body-file text-center">
            <i class="attach" data-ng-click="vm.downloadFile($event)"></i>
        </th>

        <!-- Action -->
        <th class="text-center"><i class="add" data-ng-click="vm.doAction($event)"></i></th>

        <!-- Absence regularised -->
        <th class="text-center">
            <label class="regularized-absence" data-ng-click="vm.stopAbsencePropagation($event)">
                <input type="checkbox" data-ng-model="event.counsellor_regularisation" data-ng-change="vm.toggleAbsenceRegularised(event)">
                <span class="checkmark"></span>
            </label>
        </th>

        <!-- description content -->
    <tr ng-class="{open: vm.isCollapsibleOpen(event)}" class="absences-table-body-description">
        <td colspan="7" data-ng-show="vm.isDayHistoryEmpty(event)">
            <div class="absences-table-body-description-content table-reason"
                 data-ng-repeat="periods in event.student.day_history"
                 ng-if="!($index == 4) && vm.hasPeriod(periods)">
                <span>[[vm.getPeriodStartDate(periods, event)]]-[[vm.getPeriodEndDate(periods, event)]]</span>
                <label>
                    <select data-ng-model="vm.getPeriodData(periods, event).reason_id"
                            data-ng-change="vm.changeDescriptionReason(vm.getPeriodData(periods, event), event)"
                            ng-options="reason.id as reason.label for reason in vm.eventReasonsTypeDescription">
                        <option value="">[[lang.translate('presences.absence.select.empty')]]</option>
                    </select>
                </label>
            </div>
        </td>
    <tr>
    </tr>
    </tbody>
</table>